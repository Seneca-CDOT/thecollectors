<!doctype html>
<html>
  <head>
	<title> The Collectors </title>
	<meta charset="utf-8">
    <script type="text/javascript" src="http://code.jquery.com/jquery-1.7.2.min.js"></script>

    <script type="text/javascript" src="minim.js"></script>
    <script type="text/javascript" src="syntaxHighlight.js"></script>
    <script type="text/javascript" src="XMLWriter-1.0.0-min.js"></script>
    <script type="text/javascript" src="processing.js"></script>
    <script type="text/javascript" src="processing-lazyload.js"></script>
    <script type="text/javascript" src="canvasFocus.js"></script>

    <!--Custom JavaScript class definitions. Consolidate into one file at the end-->
    <script type="text/javascript" src="Utilities.js"></script>
    <script type="text/javascript" src="gameValues.js"></script>
    <script type="text/javascript" src="Fraction.js"></script>
    <script type="text/javascript" src="Vertex.js"></script>
    <script type="text/javascript" src="Node.js"></script>
    <script type="text/javascript" src="Structure.js"></script>
    <script type="text/javascript" src="Graph.js"></script>
    <script type="text/javascript" src="Map.js"></script>
    <script type="text/javascript" src="MapGenerator.js"></script>
    
    <script src="locale/text.jsonp"></script>
    <script type="text/javascript">
	try {
	  var language = window.navigator.userLanguage || window.navigator.language;
	  //Load the tutorial text from the json file
	  var pageText = JSON.parse(language);
	} catch(err) {
	  var pageText = JSON.parse(en_us);
	}
    </script>

	<style>
	  canvas {outline:none;width:960px;height:640px;}
      button { width:120px; }
      div.textBox
      {
          background-color: #000000;
          opacity:0.6;
      }
      div.labelBox
      {
          background-color: #000000;
          opacity:0.8;
      }
      div.visible { display:block; }
      div.hidden { display:none; }
      div.textBox p
      {
          color:#ffffff;
          margin: 10px 10px;
      }
      div.labelBox p
      {
          color:#ffffff;
          margin: 10px 10px;
      }
	</style>
  </head>
  <body>

    <canvas onmouseenter="$('canvas').focus()" data-processing-sources="codebase.pde assetPreloader.pde game.pde"></canvas>
    <div id="menuDiv" style="display:block;position:fixed;top:650px;left:0px;">
        <button id="campaignButton"></button><br />
        <button id="quickPlayButton"></button><br />
        <button id="optionsButton"></button>
    </div>
    <div id="difficultyDiv" style="display:none;position:fixed;top:100px;left:250px;">
        <button id="easyButton"></button><br />
        <button id="mediumButton"></button><br />
        <button id="hardButton"></button><br />
    </div>
    <script type="text/javascript" >
	document.getElementById("campaignButton").innerHTML = pageText.campaignButton;
	document.getElementById("quickPlayButton").innerHTML = pageText.quickPlayButton;
	document.getElementById("optionsButton").innerHTML = pageText.optionsButton;
	document.getElementById("easyButton").innerHTML = pageText.easyButton;
	document.getElementById("mediumButton").innerHTML = pageText.mediumButton;
	document.getElementById("hardButton").innerHTML = pageText.hardButton;
    </script>
    <div id="tutorialTextDiv" class="textBox visible" style="position:fixed;left:200px;top:500px;width:500px;height:110px;">
        <p id="tutorialTextElement">
        </p>
    </div>
    <div id="legendDiv" class="textBox visible" style="position:fixed;left:730px;top:500px;width:200px;height:110px;">
        <p id="legendElement">
        </p>
    </div>

    <script type="text/javascript">
	var tutorialText = pageText.tutorial;
	document.getElementById("legendElement").innerHTML = tutorialText[0];
	var tutorialIndex = 1;
        document.getElementById("tutorialTextElement").innerHTML = tutorialText[tutorialIndex];

        // Event listener for the <p> element containing tutorial instructions.
        document.getElementById("tutorialTextDiv").addEventListener("click", function(event) {
          advanceTutorial();
        }, false);
        function advanceTutorial() {
          if (tutorialIndex < tutorialText.length - 1) {
            document.getElementById("tutorialTextElement").innerHTML = tutorialText[++tutorialIndex];
          }
        }
    </script>

    <script type="text/javascript">
      var sketch;
      var gameMode = null;
      var canvasHasFocus = false;
      
      document.addEventListener("DOMMouseScroll", function(e) {
        if (canvasHasFocus) {
          e.preventDefault();
        }
      }, false);
      // Event listener for the div containing the main menu buttons
      document.getElementById("menuDiv").addEventListener("click", function(event) {
        switch (event.target.id) {
          case "campaignButton":
            buttonClick(1);
            break;
          case "quickPlayButton":
            buttonClick(2);
            break;
          case "optionsButton":
            buttonClick(3);
            break;
        }
      }, false);
      // Event listener for the div containing the difficulty menu buttons
      document.getElementById("difficultyDiv").addEventListener("click", function(event) {
        switch (event.target.id) {
          case "easyButton":
            buttonClick(4);
            break;
          case "mediumButton":
            buttonClick(5);
            break;
          case "hardButton":
            buttonClick(6);
            break;
        }
      }, false);

      function buttonClick(buttonVal) {
        switch (buttonVal) {
          case 1:
            menuDiv.style.display = "none";
            difficultyDiv.style.display = "block";
            gameMode = "Campaign";
            break;
          case 2:
            menuDiv.style.display = "none";
            difficultyDiv.style.display = "block";
            gameMode = "Quick Play";
            break;
          case 3:
            //TODO: make options menu screen
            break;
          case 4:
            difficultyDiv.style.display = "none";
            sketch = Processing.instances[0];
            sketch.loadDifficulty(1, gameMode);
            break;
          case 5:
            difficultyDiv.style.display = "none";
            sketch = Processing.instances[0];
            sketch.loadDifficulty(2, gameMode);
            break;
          case 6:
            difficultyDiv.style.display = "none";
            sketch = Processing.instances[0];
            sketch.loadDifficulty(3, gameMode);
            break;
          default:
            alert("Invalid button value!");
            break;
        }
      }
    </script>
  </body>  
</html>
