<!doctype html>
<html>
  <head>
	<title> The Collectors </title>
	<meta charset="utf-8">
    <script type="text/javascript" src="http://code.jquery.com/jquery-1.7.2.min.js"></script>

    <script type="text/javascript" src="minim.js"></script>
    <script type="text/javascript" src="syntaxHighlight.js"></script>
    <script type="text/javascript" src="XMLWriter-1.0.0-min.js"></script>
    <script type="text/javascript" src="processing.js"></script>
    <script type="text/javascript" src="processing-lazyload.js"></script>
    <script type="text/javascript" src="canvasFocus.js"></script>

    <!--Custom utility scripts and global variables-->
    <script type="text/javascript" src="CanvasOverlay.js"></script>
    <script type="text/javascript" src="Utilities.js"></script>
    <script type="text/javascript" src="gameValues.js"></script>

    <!--Custom JavaScript object definitions. Consolidate into one file at the end-->
    <script type="text/javascript" src="Fraction.js"></script>
    <script type="text/javascript" src="Vertex.js"></script>
    <script type="text/javascript" src="Node.js"></script>
    <script type="text/javascript" src="Structure.js"></script>
    <script type="text/javascript" src="Graph.js"></script>
    <script type="text/javascript" src="Map.js"></script>
    <script type="text/javascript" src="MapGenerator.js"></script>

	<style>
	  canvas {outline:none;width:960px;height:640px;}
      button { width:120px; }
      div.textBox
      {
          background-color: #000000;
          opacity:0.6;
      }
      div.labelBox
      {
          background-color: #000000;
          opacity:0.8;
      }
      div.visible { display:block; }
      div.hidden { display:none; }
      div.textBox p
      {
          color:#ffffff;
          margin: 10px 10px;
      }
      div.labelBox p
      {
          color:#ffffff;
          margin: 10px 10px;
      }
	</style>
  </head>
  <body>

    <canvas onmouseenter="$('canvas').focus()" data-processing-sources="codebase.pde assetPreloader.pde game.pde"></canvas>
    <div id="menuDiv" style="display:block;position:fixed;top:650px;left:0px;">
        <button id="campaignButton">Campaign</button><br />
        <button id="quickPlayButton">Quick Play</button><br />
        <button id="optionsButton">Options</button>
    </div>
    <div id="difficultyDiv" style="display:none;position:fixed;top:100px;left:250px;">
        <button id="easyButton">Easy</button><br />
        <button id="mediumButton">Normal</button><br />
        <button id="hardButton">Hard</button><br />
    </div>
    <div id="tutorialTextDiv" class="textBox visible inCanvas" style="position:fixed;left:200px;top:500px;width:500px;height:110px;">
        <p id="tutorialTextElement">
        </p>
    </div>
    <div id="legendDiv" class="textBox visible inCanvas" style="position:fixed;left:730px;top:500px;width:200px;height:110px;">
        <p id="legendElement">
        </p>
    </div>

    <script type="text/javascript">
        var tutorialText = [], tutorialIndex = 0;
        tutorialText[0] = "Welcome to the tutorial. Press the Enter button or click this text area to continue.";
        tutorialText[1] = "This tutorial will explain how to play the game, and what the objectives are.";
        tutorialText[2] = "Let's take a look at the map. This is the main play area.<br/><br/>You can drag the map by holding down the LEFT mouse button and dragging the mouse in any direction.";
        tutorialText[3] = "Alternatively, you can use the keyboard arrow keys to move the map.";
        document.getElementById("tutorialTextElement").innerHTML = tutorialText[tutorialIndex];
        document.getElementById("legendElement").innerHTML = "Enter Key or Click<br/> to Advance Tutorial";

        // Event listener for the <p> element containing tutorial instructions.
        document.getElementById("tutorialTextDiv").addEventListener("click", function(event) {
          advanceTutorial();
        }, false);
        function advanceTutorial() {
          if (tutorialIndex < tutorialText.length - 1) {
            document.getElementById("tutorialTextElement").innerHTML = tutorialText[++tutorialIndex];
          }
        }
    </script>

    <script type="text/javascript">

      var gameMode = null;
      var canvasHasFocus = false;
      
      document.addEventListener("DOMMouseScroll", function(e) {
        if (canvasHasFocus) {
          e.preventDefault();
        }
      }, false);
      // Event listener for the div containing the main menu buttons
      document.getElementById("menuDiv").addEventListener("click", function(event) {
        switch (event.target.id) {
          case "campaignButton":
            buttonClick(1);
            break;
          case "quickPlayButton":
            buttonClick(2);
            break;
          case "optionsButton":
            buttonClick(3);
            break;
        }
      }, false);
      // Event listener for the div containing the difficulty menu buttons
      document.getElementById("difficultyDiv").addEventListener("click", function(event) {
        switch (event.target.id) {
          case "easyButton":
            buttonClick(4);
            break;
          case "mediumButton":
            buttonClick(5);
            break;
          case "hardButton":
            buttonClick(6);
            break;
        }
      }, false);

      function buttonClick(buttonVal) {
        switch (buttonVal) {
          case 1:
            menuDiv.style.display = "none";
            difficultyDiv.style.display = "block";
            gameMode = "Campaign";
            break;
          case 2:
            menuDiv.style.display = "none";
            difficultyDiv.style.display = "block";
            gameMode = "Quick Play";
            break;
          case 3:
            player.driveToDestination();
            break;
          case 4:
            difficultyDiv.style.display = "none";
            var sketch = Processing.instances[0];
            console.log(sketch);
            sketch.loadDifficulty(1, gameMode);
            break;
          case 5:
            difficultyDiv.style.display = "none";
            sketch.loadDifficulty(2, gameMode);
            break;
          case 6:
            difficultyDiv.style.display = "none";
            sketch.loadDifficulty(3, gameMode);
            break;
          default:
            alert("Invalid button value!");
            break;
        }
      }
    </script>
  </body>  
</html>
