<!doctype html>
<html>
  <head>
	<title> The Collectors </title>
	<meta charset="utf-8">
    <script type="text/javascript" src="http://code.jquery.com/jquery-1.7.2.min.js"></script>

    <script type="text/javascript" src="minim.js"></script>
    <script type="text/javascript" src="syntaxHighlight.js"></script>
    <script type="text/javascript" src="XMLWriter-1.0.0-min.js"></script>
    <script type="text/javascript" src="processing.js"></script>
    <script type="text/javascript" src="processing-lazyload.js"></script>
    <script type="text/javascript" src="canvasFocus.js"></script>

    <!--Custom utility scripts and global variables-->
    <script type="text/javascript" src="CanvasOverlay.js"></script>
    <script type="text/javascript" src="Utilities.js"></script>
    <script type="text/javascript" src="gameValues.js"></script>

    <!--Custom JavaScript object definitions. Consolidate into one file at the end-->
    <script type="text/javascript" src="Fraction.js"></script>
    <script type="text/javascript" src="Vertex.js"></script>
    <script type="text/javascript" src="Node.js"></script>
    <script type="text/javascript" src="Structure.js"></script>
    <script type="text/javascript" src="Graph.js"></script>
    <script type="text/javascript" src="Map.js"></script>
    <script type="text/javascript" src="MapGenerator.js"></script>
    
    <script src="locale/text.jsonp"></script>
    <script type="text/javascript">
	try {
	  var language = window.navigator.userLanguage || window.navigator.language;
	  //Load the tutorial text from the json file
	  var pageText = JSON.parse(language);
	} catch(err) {
	  var pageText = JSON.parse(en_us);
	}
    </script>

	<style>
	  canvas {outline:none;width:940px;height:600px;}
      button { width:120px; }
      div.textBox
      {
          background-color: #000000;
          opacity:0.6;
      }
      div.labelBox
      {
          background-color: #A9DEB9;
          opacity:1.0;
      }
      div.fuelBox
      {
          background-color: #000000;
          opacity:0.6;
      }
      div.visible { display:block; }
      div.hidden { display:none; }
      div.labelBox p
      {
          color:#000000;
          margin: 10px 10px 10px 10px;
      }
      div.textBox p
      {
          color:#ffffff;
          margin: 10px 10px;
      }
      div.fuelBox p
      {
          color:#ffffff;
          margin: 10px 10px 10px 10px;
      }
      p.center
      {
          text-align:center;
          font-weight:bold;
          font-size:28px;
      }
      div.fuelGauge
      {
          position:fixed;
          left:756px;
          top:459px;
          width:192px;
          height:192px;
          opacity:1.0;
      }
      div.fuelNeedle
      {
          position:fixed;
          left:908px;
          top:433px;
          width:48px;
          height:400px;
      }
	</style>
  </head>
  <body>
  <div style="width:940px;height:44px;background-color:#A9DEB9;">
    <div id="cashImgDiv" class="labelBox" style="position:absolute;width:40px;height:44px;">
        <img src="./assets/items/money.svg" alt="Money Bag" width="40px" height="40px" />
    <div>
    <div id="cashTextDiv" class="labelBox" style="position:absolute;left:40px;top:0px;width:150px;height:44px;">
        <p id="cashElement" style="font-size:28px;margin:5px;">
        </p>
    </div>
    <div id="parcelImgDiv" class="labelBox" style="position:absolute;left:190px;top:0px;width:40px;height:44px;">
        <img src="./assets/items/parcel.svg" alt="Parcel" width="40px" height="40px" />
    </div>
    <div id="parcelTextDiv" class="labelBox" style="position:absolute;left:230px;top:0px;width:80px;height:44px;">
        <p id="parcelElement" style="font-size:28px;margin:5px;">
        </p>
    </div>
  </div>

    <canvas onmouseenter="$('canvas').focus()" data-processing-sources="codebase.pde assetPreloader.pde game.pde"></canvas>
    <div id="menuDiv" style="display:none;position:fixed;top:650px;left:0px;">
        <button id="campaignButton"></button><br />
        <button id="quickPlayButton"></button><br />
        <button id="optionsButton"></button>
    </div>
    <div id="difficultyDiv" style="display:none;position:fixed;top:100px;left:250px;">
        <button id="easyButton"></button><br />
        <button id="mediumButton"></button><br />
        <button id="hardButton"></button><br />
    </div>
    <script type="text/javascript" >
	document.getElementById("campaignButton").innerHTML = pageText.campaignButton;
	document.getElementById("quickPlayButton").innerHTML = pageText.quickPlayButton;
	document.getElementById("optionsButton").innerHTML = pageText.optionsButton;
	document.getElementById("easyButton").innerHTML = pageText.easyButton;
	document.getElementById("mediumButton").innerHTML = pageText.mediumButton;
	document.getElementById("hardButton").innerHTML = pageText.hardButton;
    </script>
    <div id="tutorialTextDiv" class="textBox hidden inCanvas" style="position:fixed;left:200px;top:500px;width:500px;height:110px;">
        <p id="tutorialTextElement">
        </p>
    </div>
    <div id="fuelDiv" class="fuelBox visible inCanvas" style="position:fixed;left:676px;top:540px;width:80px;height:110px;">
        <p id="fuelElement2" class="center">
        </p>
    </div>

    <div id="fuelGaugeDiv" class="fuelGauge inCanvas">
        <img src="assets/items/fuel_gauge.svg" alt="Fuel Gauge" width="192px" height="192px" />
    </div>
    <div id="fuelNeedleDiv" class="fuelNeedle inCanvas">
        <img src="assets/items/fuel_tick.svg" alt="Fuel Needle" width="48px" height="400px" />
    </div>

    <script type="text/javascript">
	var tutorialText = pageText.tutorial;
	var tutorialIndex = 1;
        document.getElementById("tutorialTextElement").innerHTML = tutorialText[tutorialIndex];

        // Event listener for the <p> element containing tutorial instructions.
        document.getElementById("tutorialTextDiv").addEventListener("click", function(event) {
          advanceTutorial();
        }, false);
        function advanceTutorial() {
          if (tutorialIndex < tutorialText.length - 1) {
            document.getElementById("tutorialTextElement").innerHTML = tutorialText[++tutorialIndex];
          }
        }
    </script>

    <script type="text/javascript">

      var gameMode = null;
      var canvasHasFocus = false;
      
      document.addEventListener("DOMMouseScroll", function(e) {
        if (canvasHasFocus) {
          e.preventDefault();
        }
      }, false);
      // Event listener for the div containing the main menu buttons
      document.getElementById("menuDiv").addEventListener("click", function(event) {
        switch (event.target.id) {
          case "campaignButton":
            buttonClick(1);
            break;
          case "quickPlayButton":
            buttonClick(2);
            break;
          case "optionsButton":
            buttonClick(3);
            break;
        }
      }, false);
      // Event listener for the div containing the difficulty menu buttons
      document.getElementById("difficultyDiv").addEventListener("click", function(event) {
        switch (event.target.id) {
          case "easyButton":
            buttonClick(4);
            break;
          case "mediumButton":
            buttonClick(5);
            break;
          case "hardButton":
            buttonClick(6);
            break;
        }
      }, false);

      function buttonClick(buttonVal) {
        switch (buttonVal) {
          case 1:
            menuDiv.style.display = "none";
            difficultyDiv.style.display = "block";
            gameMode = "Campaign";
            break;
          case 2:
            menuDiv.style.display = "none";
            difficultyDiv.style.display = "block";
            gameMode = "Quick Play";
            break;
          case 3:
            player.driveToDestination();
            break;
          case 4:
            difficultyDiv.style.display = "none";
            var sketch = Processing.instances[0];
            console.log(sketch);
            sketch.loadDifficulty(1, gameMode);
            break;
          case 5:
            difficultyDiv.style.display = "none";
            sketch.loadDifficulty(2, gameMode);
            break;
          case 6:
            difficultyDiv.style.display = "none";
            sketch.loadDifficulty(3, gameMode);
            break;
          default:
            alert("Invalid button value!");
            break;
        }
      }
    </script>
  </body>  
</html>
